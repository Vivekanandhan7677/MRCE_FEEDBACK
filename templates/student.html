<!DOCTYPE html>
<html>
<head>
    <title>Student Feedback Form</title>
    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body{
            min-height:100vh;
            background: linear-gradient(135deg,#36d1dc,#5b86e5);
            display:flex;
            justify-content:center;
            align-items:center;
            padding:30px 0;
        }

        .card{
            background:#fff;
            width:950px;
            padding:30px 40px;
            border-radius:12px;
            box-shadow:0 20px 40px rgba(0,0,0,0.25);
            position:relative;
        }

        .logout{
            position:absolute;
            right:30px;
            top:30px;
            text-decoration:none;
            color:#fff;
            background:#ff4d4d;
            padding:8px 14px;
            border-radius:6px;
            font-size:14px;
        }

        .header{
            text-align:center;
            margin-bottom:20px;
        }

        .logo{
            width:90px;
            display:block;
            margin:0 auto;
        }

        .header h1{
            color:#0b3d91;
            font-size:26px;
            margin-top:8px;
            font-weight:700;
        }

        h2{
            text-align:center;
            margin-bottom:25px;
            color:#333;
        }

        .grid{
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap:20px;
        }

        .form-row{
            display:flex;
            flex-direction:column;
        }

        label{
            font-weight:600;
            margin-bottom:6px;
            color:#444;
        }

        input[type="text"], select{
            padding:10px 12px;
            border:1px solid #ccc;
            border-radius:6px;
            font-size:14px;
        }

        h3{
            margin:25px 0 10px;
            color:#222;
            border-bottom:2px solid #eee;
            padding-bottom:6px;
        }

        .question{
            margin-top:18px;
            padding:15px;
            background:#f8f9fc;
            border-radius:8px;
        }

        .options{
            margin-top:10px;
            display:flex;
            gap:18px;
        }

        textarea{
            width:100%;
            margin-top:10px;
            padding:10px;
            border-radius:6px;
            border:1px solid #ccc;
        }

        button{
            margin-top:30px;
            width:100%;
            padding:14px;
            border:none;
            border-radius:6px;
            background:#36d1dc;
            color:white;
            font-size:17px;
            font-weight:600;
            cursor:pointer;
        }
    </style>
</head>

<body>

<div class="card">

    <a href="/logout" class="logout">Logout</a>

    <div class="header">
        <img src="{{ url_for('static', filename='logo.png') }}" class="logo">
        <h1>MALLA REDDY COLLEGE OF ENGINEERING</h1>
    </div>

    <h2>Student Feedback Form</h2>

    <!-- ✅ FORM START -->
    <form method="POST">

        <div class="grid">

            <div class="form-row">
                <label>Name</label>
                <input type="text" name="name" required>
            </div>

            <div class="form-row">
                <label>Roll No</label>
                <input type="text" name="roll" required >
            </div>

            <div class="form-row">
                <label>Branch</label>
                <select name="branch" id="branch" onchange="loadSubjects()" required>
                    <option value="">--Select Branch--</option>
                    <option value="CSE_AI_ML">CSE(AI&ML)</option>
                    <option value="CSE">CSE</option>
                    <option value="AI_DS">AI&DS</option>
                    <option value="CSD">CSD</option>
                    <option value="ECE">ECE</option>
                    <option value="IT">IT</option>
                </select>
            </div>

            <div class="form-row">
                <label>Year</label>
                <select name="year" id="year" onchange="loadSubjects()" required>
                    <option value="">--Select Year--</option>
                    <option>I</option>
                    <option>II</option>
                    <option>III</option>
                    <option>IV</option>
                </select>
            </div>

            <div class="form-row">
                <label>Semester</label>
                <select name="semester" id="semester" onchange="loadSubjects()" required>
                    <option value="">--Select Semester--</option>
                    <option>I</option>
                    <option>II</option>
                </select>
            </div>

            <div class="form-row">
                <label>Section</label>
                <select name="section" id="section" onchange="loadSubjects()" required>
                    <option value="">Select Section</option>
                    <option>A</option><option>B</option><option>C</option>
                    <option>D</option><option>E</option><option>F</option>
                </select>
            </div>

            <div class="form-row" style="grid-column: span 2;">
                <label>Subject</label>
                <select name="subject" id="subject" onchange="setFaculty()" required>
                    <option value="">--Select Subject--</option>
                </select>
            </div>

            <div class="form-row" style="grid-column: span 2;">
                <label>Faculty Name</label>
                <input type="text" name="faculty" id="faculty" readonly>
            </div>

        </div>
        


        <h3>Rate the following questions (1–5)</h3>
<div class="question">
    <b>Q1. Teacher comes to the class in time</b><br>
    <label><input type="radio" name="q1" value="5" required> 5</label>
    <label><input type="radio" name="q1" value="4"> 4</label>
    <label><input type="radio" name="q1" value="3"> 3</label>
    <label><input type="radio" name="q1" value="2"> 2</label>
    <label><input type="radio" name="q1" value="1"> 1</label>
</div>

<div class="question">
    <b>Q2. Teacher comes well planned and prepared</b><br>
    <label><input type="radio" name="q2" value="5" required> 5</label>
    <label><input type="radio" name="q2" value="4"> 4</label>
    <label><input type="radio" name="q2" value="3"> 3</label>
    <label><input type="radio" name="q2" value="2"> 2</label>
    <label><input type="radio" name="q2" value="1"> 1</label>
</div>

<div class="question">
    <b>Q3. Teacher speaks clearly and audibly</b><br>
    <label><input type="radio" name="q3" value="5" required> 5</label>
    <label><input type="radio" name="q3" value="4"> 4</label>
    <label><input type="radio" name="q3" value="3"> 3</label>
    <label><input type="radio" name="q3" value="2"> 2</label>
    <label><input type="radio" name="q3" value="1"> 1</label>
</div>

<div class="question">
    <b>Q4. Teacher provides examples effectively</b><br>
    <label><input type="radio" name="q4" value="5" required> 5</label>
    <label><input type="radio" name="q4" value="4"> 4</label>
    <label><input type="radio" name="q4" value="3"> 3</label>
    <label><input type="radio" name="q4" value="2"> 2</label>
    <label><input type="radio" name="q4" value="1"> 1</label>
</div>

<div class="question">
    <b>Q5. Use of ICT tools while teaching</b><br>
    <label><input type="radio" name="q5" value="5" required> 5</label>
    <label><input type="radio" name="q5" value="4"> 4</label>
    <label><input type="radio" name="q5" value="3"> 3</label>
    <label><input type="radio" name="q5" value="2"> 2</label>
    <label><input type="radio" name="q5" value="1"> 1</label>
</div>

<div class="question">
    <b>Q6. Teacher encourages doubts and answers well</b><br>
    <label><input type="radio" name="q6" value="5" required> 5</label>
    <label><input type="radio" name="q6" value="4"> 4</label>
    <label><input type="radio" name="q6" value="3"> 3</label>
    <label><input type="radio" name="q6" value="2"> 2</label>
    <label><input type="radio" name="q6" value="1"> 1</label>
</div>

<div class="question">
    <b>Q7. Teacher is courteous and impartial</b><br>
    <label><input type="radio" name="q7" value="5" required> 5</label>
    <label><input type="radio" name="q7" value="4"> 4</label>
    <label><input type="radio" name="q7" value="3"> 3</label>
    <label><input type="radio" name="q7" value="2"> 2</label>
    <label><input type="radio" name="q7" value="1"> 1</label>
</div>

<div class="question">
    <b>Q8. Teacher maintains discipline</b><br>
    <label><input type="radio" name="q8" value="5" required> 5</label>
    <label><input type="radio" name="q8" value="4"> 4</label>
    <label><input type="radio" name="q8" value="3"> 3</label>
    <label><input type="radio" name="q8" value="2"> 2</label>
    <label><input type="radio" name="q8" value="1"> 1</label>
</div>

<div class="question">
    <b>Q9. Teacher completes syllabus at proper pace</b><br>
    <label><input type="radio" name="q9" value="5" required> 5</label>
    <label><input type="radio" name="q9" value="4"> 4</label>
    <label><input type="radio" name="q9" value="3"> 3</label>
    <label><input type="radio" name="q9" value="2"> 2</label>
    <label><input type="radio" name="q9" value="1"> 1</label>
</div>

<div class="question">
    <b>Q10. Teacher gives feedback on answer scripts</b><br>
    <label><input type="radio" name="q10" value="5" required> 5</label>
    <label><input type="radio" name="q10" value="4"> 4</label>
    <label><input type="radio" name="q10" value="3"> 3</label>
    <label><input type="radio" name="q10" value="2"> 2</label>
    <label><input type="radio" name="q10" value="1"> 1</label>
</div>


        <div class="question">
            <b>Any Suggestions (Optional)</b>
            <textarea name="suggestion" rows="4"
                placeholder="Write your suggestions here..."></textarea>
        </div>

        <button type="submit">Submit Feedback</button>

    </form>
    <!-- ✅ FORM END -->

</div>

<script>
function loadSubjects(){
    let b = branch.value;
    let y = year.value;
    let s = semester.value;
    let sec = section.value;

    if(b && y && s && sec){
        fetch(`/get_subjects?branch=${b}&year=${y}&semester=${s}&section=${sec}`)
        .then(res => res.json())
        .then(data => {
            subject.innerHTML = '<option value="">--Select Subject--</option>';

            data.subjects.forEach(item => {
                let opt = document.createElement("option");
                opt.value = item.subject;
                opt.textContent = item.subject;
                opt.setAttribute("data-faculty", item.faculty);
                subject.appendChild(opt);
            });

            faculty.value = "";
        });
    }
}

function setFaculty(){
    let f = subject.selectedOptions[0].getAttribute("data-faculty");
    faculty.value = f;
}
</script>

</body>
</html>
